@using Ready4Hire.Data
@using Ready4Hire.MVVM.ViewModels

<div class="sidebar-nav">
    <div class="sidebar-header">
        <img src="images/logo.jpg" alt="Logo" class="sidebar-icon" />
    </div>

    <div class="sidebar-menu">
        <NavLink class="sidebar-link" href="/chat/0">
            Nuevo chat
        </NavLink>

        @if (vm.Chats != null)
        {
            foreach (var chat in vm.Chats)
            {
                <NavLink class="sidebar-link" href="@($"/chat/{chat.Id}")">
                    @chat.Title
                </NavLink>
            }
        }
    </div>

    <div class="sidebar-footer">
        <div class="sidebar-user">
            <img src="images/user-avatar.png" alt="Avatar" class="sidebar-avatar" />
            <span class="sidebar-username">Nombre Usuario</span>
        </div>

        <NavLink class="sidebar-action" href="/settings">
            <span class="bi bi-gear"></span> Ajustes
        </NavLink>

        <NavLink class="sidebar-action" href="/logout">
            <span class="bi bi-box-arrow-left"></span> Cerrar Sesión
        </NavLink>
    </div>
</div>

@code 
{
    [Inject]
    private AppDbContext Db { get; set; }
    private NavMenuViewModel vm;

    protected override void OnInitialized()
    {
        vm = new NavMenuViewModel(Db);
    }
}